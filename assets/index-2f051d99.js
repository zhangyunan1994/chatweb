import{d as C,C as H,u as Q,l as Z,B as L,c as I,r as x,o as w,a as N,g as e,m as n,s,b as t,P as M,w as a,M as u,O as k,p as X,_ as b,U as ee,F as E,J as O,V as te,t as z,W as se,X as T,Y as j,Z as V,z as F,e as A,n as ne,$ as R,a0 as ae,T as oe,a1 as ie,a2 as U,a3 as le,a4 as ce}from"./index-a7c6d4ab.js";function re(){const $=new Date,i=$.getDate(),p=$.getMonth()+1;return`${$.getFullYear()}-${p}-${i}`}const ue={class:"p-4 space-y-5 min-h-[200px]"},pe={class:"space-y-6"},de={class:"flex items-center space-x-4"},me={class:"flex-shrink-0 w-[100px]"},ve={class:"flex-1"},he={class:"flex items-center space-x-4"},fe={class:"flex-shrink-0 w-[100px]"},ge={class:"w-[200px]"},_e={class:"flex items-center space-x-4"},ye={class:"flex-shrink-0 w-[100px]"},xe={class:"flex-1"},ke={class:"flex-shrink-0 w-[100px]"},$e={class:"flex flex-wrap items-center gap-4"},we={class:"flex items-center space-x-4"},be={class:"flex-shrink-0 w-[100px]"},Ce={class:"flex flex-wrap items-center gap-4"},Se={class:"flex items-center space-x-4"},Pe={class:"flex-shrink-0 w-[100px]"},Ue={class:"flex flex-wrap items-center gap-4"},ze={class:"flex items-center space-x-4"},Ie={class:"flex-shrink-0 w-[100px]"},Ne=C({__name:"General",setup($){const i=H(),p=Q(),{isMobile:v}=Z(),h=L(),_=I(()=>i.theme),o=I(()=>p.userInfo),f=x(o.value.avatar??""),y=x(o.value.name??""),r=x(o.value.description??""),c=I({get(){return i.language},set(l){i.setLanguage(l)}}),S=[{label:"Auto",key:"auto",icon:"ri:contrast-line"},{label:"Light",key:"light",icon:"ri:sun-foggy-line"},{label:"Dark",key:"dark",icon:"ri:moon-foggy-line"}],g=[{label:"简体中文",key:"zh-CN",value:"zh-CN"},{label:"繁體中文",key:"zh-TW",value:"zh-TW"},{label:"English",key:"en-US",value:"en-US"},{label:"한국어",key:"ko-KR",value:"ko-KR"}];function G(l){p.updateUserInfo(l),h.success(z("common.success"))}function J(){p.resetUserInfo(),h.success(z("common.success")),window.location.reload()}function W(){const l=re(),d=localStorage.getItem("chatStorage")||"{}",m=JSON.stringify(JSON.parse(d),null,2),P=new Blob([m],{type:"application/json"}),D=URL.createObjectURL(P),B=document.createElement("a");B.href=D,B.download=`chat-store_${l}.json`,document.body.appendChild(B),B.click(),document.body.removeChild(B)}function K(l){const d=l.target;if(!d||!d.files)return;const m=d.files[0];if(!m)return;const P=new FileReader;P.onload=()=>{try{const D=JSON.parse(P.result);localStorage.setItem("chatStorage",JSON.stringify(D)),h.success(z("common.success")),location.reload()}catch{h.error(z("common.invalidFileFormat"))}},P.readAsText(m)}function Y(){localStorage.removeItem("chatStorage"),location.reload()}function q(){const l=document.getElementById("fileInput");l&&l.click()}return(l,d)=>(w(),N("div",ue,[e("div",pe,[e("div",de,[e("span",me,n(l.$t("setting.avatarLink")),1),e("div",ve,[s(t(M),{value:f.value,"onUpdate:value":d[0]||(d[0]=m=>f.value=m),placeholder:""},null,8,["value"])]),s(t(k),{size:"tiny",text:"",type:"primary",onClick:d[1]||(d[1]=m=>G({avatar:f.value}))},{default:a(()=>[u(n(l.$t("common.save")),1)]),_:1})]),e("div",he,[e("span",fe,n(l.$t("setting.name")),1),e("div",ge,[s(t(M),{value:y.value,"onUpdate:value":d[2]||(d[2]=m=>y.value=m),placeholder:""},null,8,["value"])]),s(t(k),{size:"tiny",text:"",type:"primary",onClick:d[3]||(d[3]=m=>G({name:y.value}))},{default:a(()=>[u(n(l.$t("common.save")),1)]),_:1})]),e("div",_e,[e("span",ye,n(l.$t("setting.description")),1),e("div",xe,[s(t(M),{value:r.value,"onUpdate:value":d[4]||(d[4]=m=>r.value=m),placeholder:""},null,8,["value"])]),s(t(k),{size:"tiny",text:"",type:"primary",onClick:d[5]||(d[5]=m=>G({description:r.value}))},{default:a(()=>[u(n(l.$t("common.save")),1)]),_:1})]),e("div",{class:X(["flex items-center space-x-4",t(v)&&"items-start"])},[e("span",ke,n(l.$t("setting.chatHistory")),1),e("div",$e,[s(t(k),{size:"small",onClick:W},{icon:a(()=>[s(t(b),{icon:"ri:download-2-fill"})]),default:a(()=>[u(" "+n(l.$t("common.export")),1)]),_:1}),e("input",{id:"fileInput",type:"file",style:{display:"none"},onChange:K},null,32),s(t(k),{size:"small",onClick:q},{icon:a(()=>[s(t(b),{icon:"ri:upload-2-fill"})]),default:a(()=>[u(" "+n(l.$t("common.import")),1)]),_:1}),s(t(ee),{placement:"bottom",onPositiveClick:Y},{trigger:a(()=>[s(t(k),{size:"small"},{icon:a(()=>[s(t(b),{icon:"ri:close-circle-line"})]),default:a(()=>[u(" "+n(l.$t("common.clear")),1)]),_:1})]),default:a(()=>[u(" "+n(l.$t("chat.clearHistoryConfirm")),1)]),_:1})])],2),e("div",we,[e("span",be,n(l.$t("setting.theme")),1),e("div",Ce,[(w(),N(E,null,O(S,m=>s(t(k),{key:m.key,size:"small",type:m.key===t(_)?"primary":void 0,onClick:P=>t(i).setTheme(m.key)},{icon:a(()=>[s(t(b),{icon:m.icon},null,8,["icon"])]),_:2},1032,["type","onClick"])),64))])]),e("div",Se,[e("span",Pe,n(l.$t("setting.language")),1),e("div",Ue,[s(t(te),{style:{width:"140px"},value:t(c),options:g,onUpdateValue:d[6]||(d[6]=m=>t(i).setLanguage(m))},null,8,["value"])])]),e("div",ze,[e("span",Ie,n(l.$t("setting.resetUserInfo")),1),s(t(k),{size:"small",onClick:J},{default:a(()=>[u(n(l.$t("common.reset")),1)]),_:1})])])]))}}),Be={class:"p-4 space-y-5 min-h-[200px]"},Te={class:"space-y-6"},Ae={class:"flex items-center space-x-4"},De={class:"flex-shrink-0 w-[120px]"},Me={class:"flex-1"},Ge={class:"flex items-center space-x-4"},Re={class:"flex-shrink-0 w-[120px]"},je={class:"flex-1"},Le={class:"flex items-center space-x-4"},Ee={class:"flex-shrink-0 w-[120px]"},Oe={class:"flex-1"},Ve={class:"flex items-center space-x-4"},Fe=e("span",{class:"flex-shrink-0 w-[120px]"}," 支持上下文 ",-1),Je={class:"flex flex-wrap items-center gap-4"},We={class:"flex items-center space-x-4"},Ke=e("span",{class:"flex-shrink-0 w-[120px]"}," ",-1),Ye=C({__name:"Advanced",setup($){const i=se(),p=L(),v=x(i.systemMessage??""),h=x(i.temperature??.5),_=x(i.top_p??1),o=x(i.useContext??!1);function f(r){i.updateSetting(r),p.success(z("common.success"))}function y(){i.resetSetting(),p.success(z("common.success")),window.location.reload()}return(r,c)=>{const S=T("n-switch");return w(),N("div",Be,[e("div",Te,[e("div",Ae,[e("span",De,n(r.$t("setting.role")),1),e("div",Me,[s(t(M),{value:v.value,"onUpdate:value":c[0]||(c[0]=g=>v.value=g),type:"textarea",autosize:{minRows:1,maxRows:4}},null,8,["value"])]),s(t(k),{size:"tiny",text:"",type:"primary",onClick:c[1]||(c[1]=g=>f({systemMessage:v.value}))},{default:a(()=>[u(n(r.$t("common.save")),1)]),_:1})]),e("div",Ge,[e("span",Re,n(r.$t("setting.temperature")),1),e("div",je,[s(t(j),{value:h.value,"onUpdate:value":c[2]||(c[2]=g=>h.value=g),max:1,min:0,step:.1},null,8,["value","step"])]),e("span",null,n(h.value),1),s(t(k),{size:"tiny",text:"",type:"primary",onClick:c[3]||(c[3]=g=>f({temperature:h.value}))},{default:a(()=>[u(n(r.$t("common.save")),1)]),_:1})]),e("div",Le,[e("span",Ee,n(r.$t("setting.top_p")),1),e("div",Oe,[s(t(j),{value:_.value,"onUpdate:value":c[4]||(c[4]=g=>_.value=g),max:1,min:0,step:.1},null,8,["value","step"])]),e("span",null,n(_.value),1),s(t(k),{size:"tiny",text:"",type:"primary",onClick:c[5]||(c[5]=g=>f({top_p:_.value}))},{default:a(()=>[u(n(r.$t("common.save")),1)]),_:1})]),e("div",Ve,[Fe,e("div",Je,[s(S,{value:o.value,"onUpdate:value":[c[6]||(c[6]=g=>o.value=g),c[7]||(c[7]=g=>f({useContext:o.value}))],round:!1},{checked:a(()=>[u(" 开启支持上下文会消耗更多的 Token ")]),unchecked:a(()=>[u(" 如果提问无明显关联，可以减少 Token 的使用 ")]),_:1},8,["value"])])]),e("div",We,[Ke,s(t(k),{size:"small",onClick:y},{default:a(()=>[u(n(r.$t("common.reset")),1)]),_:1})])])])}}}),qe={class:"p-4 space-y-4"},He={key:0},Qe=C({__name:"About",setup($){const i=V(),p=x(!1),v=x(),h=I(()=>!!i.isChatGPTAPI);async function _(){try{p.value=!0,v.value={timeoutMs:1e4,reverseProxy:"",apiModel:"gpt-3.5-turbo",socksProxy:"",httpsProxy:""}}finally{p.value=!1}}return F(()=>{_()}),(o,f)=>(w(),A(t(R),{show:p.value},{default:a(()=>{var y,r,c,S,g;return[e("div",qe,[e("p",null,n(o.$t("setting.api"))+"："+n(((y=v.value)==null?void 0:y.apiModel)??"-"),1),t(h)?ne("",!0):(w(),N("p",He,n(o.$t("setting.reverseProxy"))+"："+n(((r=v.value)==null?void 0:r.reverseProxy)??"-"),1)),e("p",null,n(o.$t("setting.timeout"))+"："+n(((c=v.value)==null?void 0:c.timeoutMs)??"-"),1),e("p",null,n(o.$t("setting.socks"))+"："+n(((S=v.value)==null?void 0:S.socksProxy)??"-"),1),e("p",null,n(o.$t("setting.httpsProxy"))+"："+n(((g=v.value)==null?void 0:g.httpsProxy)??"-"),1)])]}),_:1},8,["show"]))}}),Ze="chatgpt-web",Xe="2.10.9",et="ChatGPT Web",tt="ChenZhaoYu <chenzhaoyu1994@gmail.com>",st=["chatgpt-web","chatgpt","chatbot","vue"],nt={dev:"vite",build:"run-p type-check build-only",preview:"vite preview","build-only":"vite build","type-check":"vue-tsc --noEmit",lint:"eslint .","lint:fix":"eslint . --fix",bootstrap:"pnpm install && pnpm run common:prepare","common:cleanup":"rimraf node_modules && rimraf pnpm-lock.yaml","common:prepare":"husky install"},at={"@traptitech/markdown-it-katex":"^3.6.0","@vueuse/core":"^9.13.0","highlight.js":"^11.7.0",html2canvas:"^1.4.1",katex:"^0.16.4","markdown-it":"^13.0.1","naive-ui":"^2.34.3",pinia:"^2.0.33",vue:"^3.2.47","vue-i18n":"^9.2.2","vue-router":"^4.1.6"},ot={"@antfu/eslint-config":"^0.35.3","@commitlint/cli":"^17.4.4","@commitlint/config-conventional":"^17.4.4","@iconify/vue":"^4.1.0","@types/crypto-js":"^4.1.1","@types/katex":"^0.16.0","@types/markdown-it":"^12.2.3","@types/markdown-it-link-attributes":"^3.0.1","@types/node":"^18.14.6","@vitejs/plugin-vue":"^4.0.0",autoprefixer:"^10.4.13",axios:"^1.3.4","crypto-js":"^4.1.1",eslint:"^8.35.0",husky:"^8.0.3",less:"^4.1.3","lint-staged":"^13.1.2","markdown-it-link-attributes":"^4.0.1","npm-run-all":"^4.1.5",postcss:"^8.4.21",rimraf:"^4.2.0",tailwindcss:"^3.2.7",typescript:"~4.9.5",vite:"^4.2.0","vite-plugin-pwa":"^0.14.4","vue-tsc":"^1.2.0"},it={name:Ze,version:Xe,private:!1,description:et,author:tt,keywords:st,scripts:nt,dependencies:at,devDependencies:ot,"lint-staged":{"*.{ts,tsx,vue}":["pnpm lint:fix"]}},lt={class:"p-4 space-y-4"},ct={class:"text-xl font-bold"},rt=e("div",{class:"p-2 space-y-2 rounded-md bg-neutral-100 dark:bg-neutral-700"},[e("p",null,[u(" 本项目基于 "),e("a",{class:"text-blue-600 dark:text-blue-500",href:"https://github.com/Chanzhaoyu/chatgpt-web",target:"_blank"}," Github：Chanzhaoyu/chatgpt-web "),u(" ，二次开发！ ")]),e("p",null,[u(" 本项目地址 "),e("a",{class:"text-blue-600 dark:text-blue-500",href:"https://github.com/cike-projects/chatgpt-web",target:"_blank"}," Github：cike-projects/chatgpt-web ")]),e("p",null," 如果你觉得此项目对你有帮助，请在 Github 帮我点个 Star 或者给予一点赞助，谢谢！ ")],-1),ut=C({__name:"Declaration",setup($){return(i,p)=>(w(),N("div",lt,[e("h2",ct," Version - "+n(t(it).version),1),rt]))}}),pt={class:"p-4 space-y-4"},dt=C({__name:"Billing",setup($){const i=x(!1),p=x();async function v(){try{i.value=!0;const{data:h}=await ae();p.value=h}finally{i.value=!1}}return F(()=>{v()}),(h,_)=>(w(),A(t(R),{show:i.value},{default:a(()=>{var o;return[e("div",pt,[e("p",null,"最近 100 天费用："+n(((o=p.value)==null?void 0:o.totalUsage)??"-")+" $",1)])]}),_:1},8,["show"]))}}),mt={class:"p-4 space-y-4 outbox"},vt=C({__name:"Plugins",setup($){const i=x();i.value=[{image:"https://picsum.photos/id/8/100/100",title:"Chat",description:"随便聊聊.",switcher:!0},{image:"https://picsum.photos/id/8/100/100",title:"Explain code",description:"Explain a complicated piece of code.",switcher:!1},{image:"https://picsum.photos/id/8/100/100",title:"SQL translate",description:"Translate natural language to SQL queries.",switcher:!1},{image:"https://picsum.photos/id/8/100/100",title:"Keywords",description:"Extract keywords from a block of text. At a lower temperature it picks keywords from the text. At a higher temperature it will generate related keywords which can be helpful for creating search indexes.",switcher:!1},{image:"https://picsum.photos/id/8/100/100",title:"Create study notes",description:"Provide a topic and get study notes.",switcher:!1}];const p=x(!1);return(v,h)=>{const _=T("n-image"),o=T("n-switch"),f=T("n-thing"),y=T("n-card");return w(),A(t(R),{show:p.value},{default:a(()=>[e("div",mt,[(w(!0),N(E,null,O(i.value,r=>(w(),A(y,null,{default:a(()=>[s(f,null,{avatar:a(()=>[s(_,{width:"54",src:r.image},null,8,["src"])]),header:a(()=>[u(n(r.title),1)]),description:a(()=>[u(n(r.description),1)]),footer:a(()=>[s(o,{value:r.switcher,"onUpdate:value":c=>r.switcher=c,round:!1},{checked:a(()=>[u(" 自然赠予你，树冠 微风 肩头的暴雨 ")]),unchecked:a(()=>[u(" 片刻后生成，平衡 忠诚 不息的身体 ")]),_:2},1032,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024))),256))])]),_:1},8,["show"])}}}),ht=oe(vt,[["__scopeId","data-v-99f1f998"]]),ft={class:"ml-2"},gt={class:"min-h-[100px]"},_t={class:"ml-2"},yt={class:"min-h-[100px]"},xt={class:"ml-2"},kt={class:"ml-2"},$t={class:"ml-2"},wt={class:"ml-2"},Ct=C({__name:"index",props:{visible:{type:Boolean}},emits:["update:visible"],setup($,{emit:i}){const p=$,v=V();I(()=>!!v.isChatGPTAPI);const h=x("General"),_=I({get(){return p.visible},set(o){i("update:visible",o)}});return(o,f)=>(w(),A(t(ce),{show:t(_),"onUpdate:show":f[1]||(f[1]=y=>le(_)?_.value=y:null),"auto-focus":!1,preset:"card",style:{width:"95%","max-width":"900px"}},{default:a(()=>[e("div",null,[s(t(ie),{value:h.value,"onUpdate:value":f[0]||(f[0]=y=>h.value=y),type:"line",animated:""},{default:a(()=>[s(t(U),{name:"General",tab:"General"},{tab:a(()=>[s(t(b),{class:"text-lg",icon:"ri:file-user-line"}),e("span",ft,n(o.$t("setting.general")),1)]),default:a(()=>[e("div",gt,[s(Ne)])]),_:1}),s(t(U),{name:"Advanced",tab:"Advanced"},{tab:a(()=>[s(t(b),{class:"text-lg",icon:"ri:equalizer-line"}),e("span",_t,n(o.$t("setting.advanced")),1)]),default:a(()=>[e("div",yt,[s(Ye)])]),_:1}),s(t(U),{name:"Config",tab:"Config"},{tab:a(()=>[s(t(b),{class:"text-lg",icon:"ri:list-settings-line"}),e("span",xt,n(o.$t("setting.config")),1)]),default:a(()=>[s(Qe)]),_:1}),s(t(U),{name:"Plugins",tab:"Plugins"},{tab:a(()=>[s(t(b),{class:"text-lg",icon:"material-symbols:money-outline"}),e("span",kt,n(o.$t("setting.plugins")),1)]),default:a(()=>[s(ht)]),_:1}),s(t(U),{name:"Billing",tab:"Billing"},{tab:a(()=>[s(t(b),{class:"text-lg",icon:"material-symbols:money-outline"}),e("span",$t,n(o.$t("setting.billing")),1)]),default:a(()=>[s(dt)]),_:1}),s(t(U),{name:"Declaration",tab:"Declaration"},{tab:a(()=>[s(t(b),{class:"text-lg",icon:"fa6-regular:hand-peace"}),e("span",wt,n(o.$t("setting.declaration")),1)]),default:a(()=>[s(ut)]),_:1})]),_:1},8,["value"])])]),_:1},8,["show"]))}});export{Ct as default};
